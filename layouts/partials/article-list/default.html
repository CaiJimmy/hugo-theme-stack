{{/* v0-style article card for 2-column grid */}}
{{ $image := partialCached "helper/image" (dict "Context" . "Type" "articleList") .RelPermalink "articleList" }}
<article class="{{ if $image.exists }}has-image{{ end }}">
    <a href="{{ .RelPermalink }}">
        {{/* Featured image */}}
        {{ if $image.exists }}
        <div class="article-image">
            {{ if $image.resource }}
                {{- if (default true .Page.Site.Params.imageProcessing.cover.enabled) -}}
                    {{- $thumbnail := $image.resource.Fill "600x400" -}}
                    <img src="{{ $thumbnail.RelPermalink }}"
                         width="{{ $thumbnail.Width }}"
                         height="{{ $thumbnail.Height }}"
                         loading="lazy"
                         alt="{{ .Title }}">
                {{- else -}}
                    <img src="{{ $image.resource.RelPermalink }}" loading="lazy" alt="{{ .Title }}">
                {{- end -}}
            {{ else }}
                <img src="{{ $image.permalink }}" loading="lazy" alt="{{ .Title }}">
            {{ end }}
        </div>
        {{ end }}

        {{/* Article details */}}
        <div class="article-details">
            {{/* Category pill - v0 style */}}
            {{ $categories := .Params.categories }}
            {{ if $categories }}
                {{ if reflect.IsSlice $categories }}
            <div class="article-category">
                    {{ range first 1 $categories }}
                <a href="{{ "categories/" | relLangURL }}{{ . | urlize }}/">{{ . }}</a>
                    {{ end }}
            </div>
                {{ else }}
            <div class="article-category">
                <a href="{{ "categories/" | relLangURL }}{{ $categories | urlize }}/">{{ $categories }}</a>
            </div>
                {{ end }}
            {{ end }}

            {{/* Title */}}
            <h3 class="article-title">
                <a href="{{ .RelPermalink }}">{{ .Title }}</a>
            </h3>

            {{/* Excerpt/Description - with line clamp */}}
            {{ with .Params.description }}
            <p class="article-preview">{{ . }}</p>
            {{ else }}
            <p class="article-preview">{{ .Summary }}</p>
            {{ end }}

            {{/* Date and reading time */}}
            <div class="article-time">
                <time datetime="{{ .Date.Format "2006-01-02" }}">
                    {{ .Date.Format (.Site.Params.dateFormat.published | default "Jan 02, 2006") }}
                </time>
                {{ if .Site.Params.article.readingTime }}
                    {{ $readingTime := div (countwords .Content) 220 }}
                    {{ if lt $readingTime 1 }}
                        {{ $readingTime = 1 }}
                    {{ end }}
                    <span>Â· {{ $readingTime }} min read</span>
                {{ end }}
            </div>

            {{/* Tags - v0 style subtle tags with # */}}
            {{ $tags := .Params.tags }}
            {{ if $tags }}
                {{ if reflect.IsSlice $tags }}
            <div class="article-tags">
                    {{ range first 3 $tags }}
                <a href="{{ "tags/" | relLangURL }}{{ . | urlize }}/">{{ . }}</a>
                    {{ end }}
            </div>
                {{ else }}
            <div class="article-tags">
                <a href="{{ "tags/" | relLangURL }}{{ $tags | urlize }}/">{{ $tags }}</a>
            </div>
                {{ end }}
            {{ end }}
        </div>
    </a>
</article>