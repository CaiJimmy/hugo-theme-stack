{{- $pag := $.Paginator -}}
{{- if gt $pag.TotalPages 1 -}}
<nav class="pagination" role="navigation" aria-label="pagination">
    {{- /* 上一页按钮 */ -}}
    <a class="page-link {{ if not $pag.Prev }}disabled{{ end }}"
        {{- if $pag.Prev -}}href="{{ $pag.Prev.URL }}" {{- end -}}
        aria-label="Previous page" 
        {{- if not $pag.Prev -}}aria-disabled="true"{{- end -}}>
        {{ partial "helper/icon" "chevron-left" }}
    </a>

    {{- /* ============================================ */ -}}
    {{- /* 核心配置：窗口大小设为 1，大幅减少手机端页码显示 */ -}}
    {{- $window := 1 -}}
    {{- /* ============================================ */ -}}
    
    {{- /* 第1页 (总是显示) */ -}}
    <a class="page-link {{ if eq $pag.PageNumber 1 }}current{{ end }}" aria-label="Page 1"
        {{- if eq $pag.PageNumber 1 -}}aria-current="page" {{- end -}}
        {{- if ne $pag.PageNumber 1 -}}href="{{ $pag.First.URL }}"{{- end -}}>
        1
    </a>

    {{- /* 左侧省略号 */ -}}
    {{- if gt $pag.PageNumber (add $window 2) -}}
    <span class="page-link pagination-link">
        {{ partial "helper/icon" "dots" }}
    </span>
    {{- end -}}

    {{- /* 中间页码：只显示当前页的前后 $window 页 */ -}}
    {{- range $pag.Pagers -}}
        {{- if and (gt .PageNumber 1) (lt .PageNumber $pag.TotalPages) -}}
            {{- if and (ge .PageNumber (sub $pag.PageNumber $window)) (le .PageNumber (add $pag.PageNumber $window)) -}}
            <a class="page-link {{ if eq .PageNumber $pag.PageNumber }}current{{ end }}"
                {{- if eq .PageNumber $pag.PageNumber -}}aria-current="page" {{- end -}} href="{{ .URL }}"
                aria-label="Page {{ .PageNumber }}">
                {{ .PageNumber }}
            </a>
            {{- end -}}
        {{- end -}}
    {{- end -}}

    {{- /* 右侧省略号 */ -}}
    {{- if lt $pag.PageNumber (sub $pag.TotalPages (add $window 1)) -}}
    <span class="page-link pagination-link">
        {{ partial "helper/icon" "dots" }}
    </span>
    {{- end -}}

    {{- /* 最后一页 (总是显示) */ -}}
    {{- if gt $pag.TotalPages 1 -}}
    <a class="page-link {{ if eq $pag.PageNumber $pag.TotalPages }}current{{ end }}"
        {{- if ne $pag.PageNumber $pag.TotalPages -}}href="{{ $pag.Last.URL }}" {{- end -}}
        aria-label="Page {{ $pag.TotalPages }}" 
        {{- if eq $pag.PageNumber $pag.TotalPages -}}aria-current="page"{{- end -}}>
        {{ $pag.TotalPages }}
    </a>
    {{- end -}}

    {{- /* 下一页按钮 */ -}}
    <a class="page-link {{ if not $pag.Next }}disabled{{ end }}"
        {{- if $pag.Next -}}href="{{ $pag.Next.URL }}" {{- end -}} 
        aria-label="Next page"
        {{- if not $pag.Next -}}aria-disabled="true"{{- end -}}>
        {{ partial "helper/icon" "chevron-right" }}
    </a>
</nav>
{{- end -}}